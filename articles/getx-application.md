---
title: "GetXの運用が辛くなったので乗り換え始めた話"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Flutter", "GetX"]
published: false
---

# GetXについて
私がいま開発に携わっているアプリはFlutterで開発をしているのですが、特にアプリの根幹となる部分をGetXというパッケージに大きく依存しています。
GetXは主に状態管理の文脈において選択肢の一つとして挙がってくるパッケージの一つですが、状態管理に限らず非常に多くの機能を提供してくれています。
特に大きなものとして「状態管理、DI管理、ルーティング管理」の3つが挙げられます。
※これ以外にも、例えば  `isBlank` や `isEmail` などの便利関数や、localeを使った多言語対応、keyValueストアの管理なども提供してくれています。

GetXはFlutter初学者がとっつきにくいであろうBuildContextを上手く隠蔽してくれたり（GetXを使っているとcontextにアクセスすることがなくなります）、簡単にDIできるので単純な処理はテストが書きやすくなるなど、知見が少ない中では恩恵を多分に受けることができるパッケージと言えると思います。
実際に、私のチームでもFlutter経験者（およびアプリ開発経験者）が全くいなかったため、そのメリットを考慮して状態管理のパッケージとしてGetXを選択したという背景があります。
選定当時は今ほどriverpodが成熟していなく（おおよそ3年前）、providerが主流ではあったもののまだまだライブラリ選定のデファクト的な選択肢が確立されていなかったという背景もありました（確かな情報ではないですがそういう印象がありました）

そんなGetXを使って開発を進めてきたのですが、機能拡充にあたってやりづらいと感じる点が多くなってきたので、やむなく他パッケージへの乗り換えを検討しています。

# 乗り換えに至った理由や経緯
GetXを使っていて扱いづらいと感じた点は以下の3点です。
1. DIの管理が難しい
2. グローバルなステートにおけるRxの扱いが難しい
3. メンテ頻度が低い

一つずつ具体的にお話しできればと思います。

## 1. DIの管理が難しい
GetXのDIは `Get.put()` で依存性の注入を行い、 `Get.find()` で注入されたクラスインスタンスの取得を行うというシンプルなものになっています。
アプリケーションがシンプルで、DIしたいクラスが少なかった頃はよかったのですが、アプリケーションが複雑になってグローバルなステートを管理することが増えるようになるにつれて、問題が顕在化するようになりました。
具体的には、どういった処理をDIすべきかという点を理解できていなかったため、何でもかんでもDIの対象としてしまい、依存注入のし忘れによるバグが多発するという問題が起きました。
GetXでDIを管理する場合、手動で依存注入をする必要があるので依存元の処理がどの処理に依存しているのか把握しなければならないのですが、注入されたインスタンスを簡単に取得できてしまうため把握が難しくバグが頻発してしまいました。

## 2. グローバルなステートにおけるRxの扱いが難しい
GetXはRxをベースとしたパッケージです。
変数に更新があるかどうかをUI上でもそうでなくても簡単に監視ができるようになっているのですが、
