---
title: "GetXの運用が辛くなったので乗り換え始めた話"
emoji: "🚀"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["Flutter", "GetX"]
published: false
---

# GetXについて
私がいま開発に携わっているアプリはFlutterで開発をしているのですが、特にアプリの根幹となる部分をGetXというパッケージに大きく依存しています。
GetXは主に状態管理の文脈において選択肢の一つとして挙がってくるパッケージの一つですが、状態管理に限らず非常に多くの機能を提供してくれています。
特に大きなものとして「状態管理、DI、ルーティング」の3つが挙げられます。
※これ以外にも、例えば  `isBlank` や `isEmail` などの便利関数や、localeを使った多言語対応、keyValueストアの管理なども提供してくれています。

GetXはFlutter初学者がとっつきにくいであろうBuildContextを上手く隠蔽してくれたり（GetXを使っているとcontextにアクセスすることがなくなります）、簡単にDIできるので単純な処理はテストが書きやすくなるなど、知見が少ない中では恩恵を多分に受けることができるパッケージと言えると思います。
実際に、私のチームでもFlutter経験者およびアプリ開発経験者が全くいなかったため、そのメリットを考慮して状態管理のパッケージとしてGetXを選択したという背景があります。
選定当時は今ほどriverpodが成熟していなく（おおよそ3年前）、providerが主流ではあったもののまだまだライブラリ選定のデファクト的な選択肢が確立されていなかったという背景もありました（という印象があったと記憶しています、、）

そんなGetXを使って開発を進めてきたのですが、機能拡充にあたってやりづらいと感じる点が多くなってきたので、やむなく他パッケージへの乗り換えを始めました。

# 乗り換えに至った理由や経緯
GetXを使っていて扱いづらいと感じた点は以下の3点です。
1. DIの可視性が低い
2. グローバルなステートにおけるRxの扱いが難しい
3. メンテ頻度が低い

一つずつ具体的にお話しできればと思います。

## 1. DIの可視性が低い
GetXのDIは `Get.put()` で依存性の注入を行い、 `Get.find()` で注入されたクラスインスタンスの取得を行うというシンプルなものになっています。
アプリケーションがシンプルで、DIしたいクラスが少なかった頃はよかったのですが、アプリケーションが複雑になってグローバルなステートを管理することが増えるようになるにつれて、問題が発生するようになりました。
具体的には以下の2点です。
1. 依存注入のし忘れによるバグが頻発した
2. 何でもかんでもDIの対象としてしまうことで、更新されるべきデータが更新されないといったバグが頻発した
